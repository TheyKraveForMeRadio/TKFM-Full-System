<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>TKFM — DJ Schedule</title>
  <meta name="description" content="DJ Schedule — public schedule view, DJ tier to claim/manage slots."/>
  <style>
    :root{
      --bg:#020617;
      --p:#a855f7; --pk:#ec4899; --c:#22d3ee; --b:#3b82f6;
      --t:rgba(226,232,240,1); --m:rgba(148,163,184,.95);
      --stroke:rgba(148,163,184,.18);
      --panel:rgba(2,6,23,.86);
      --shadow:0 0 0 1px rgba(255,255,255,.04),0 22px 70px rgba(0,0,0,.55);
      --r:26px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--t);
      background:var(--bg);
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .bg{position:fixed;inset:0;z-index:-5}
    .bg:before{
      content:"";position:absolute;inset:-35%;
      background:
        radial-gradient(900px 560px at 12% 10%, rgba(168,85,247,.20), transparent 60%),
        radial-gradient(900px 560px at 88% 14%, rgba(236,72,153,.16), transparent 60%),
        radial-gradient(900px 560px at 52% 92%, rgba(34,211,238,.14), transparent 60%),
        radial-gradient(1100px 650px at 74% 70%, rgba(59,130,246,.12), transparent 70%);
      filter: blur(2px);
      animation: drift 10.5s ease-in-out infinite;
      opacity:.98;
    }
    .bg:after{
      content:"";position:absolute;inset:-25%;
      background:
        repeating-linear-gradient(0deg, rgba(34,211,238,.06) 0px, rgba(34,211,238,.06) 1px, transparent 1px, transparent 30px),
        repeating-linear-gradient(90deg, rgba(168,85,247,.05) 0px, rgba(168,85,247,.05) 1px, transparent 1px, transparent 36px);
      transform: rotate(-6deg);
      opacity:.18;
      animation: grid 16s linear infinite;
    }
    @keyframes drift{0%,100%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(1.2%,-1.1%,0) scale(1.02)}}
    @keyframes grid{0%{transform:translate3d(-1%,-1%,0) rotate(-6deg)}50%{transform:translate3d(1.5%,1%,0) rotate(-6deg)}100%{transform:translate3d(-1%,-1%,0) rotate(-6deg)}}

    header{
      position:sticky;top:0;z-index:90;
      background:rgba(0,0,0,.72);
      border-bottom:1px solid rgba(30,41,59,.65);
      backdrop-filter:blur(14px);
    }
    header .wrap{max-width:1240px;margin:0 auto;padding:12px 22px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{
      width:46px;height:46px;border-radius:14px;position:relative;overflow:hidden;
      border:1px solid rgba(148,163,184,.18);
      background:rgba(2,6,23,.62);
      box-shadow:0 0 0 1px rgba(255,255,255,.03),0 18px 60px rgba(0,0,0,.45);
    }
    .logo:before{
      content:"";position:absolute;inset:-12px;border-radius:16px;
      background:
        radial-gradient(closest-side at 50% 50%, rgba(168,85,247,.20), transparent 70%),
        radial-gradient(closest-side at 35% 65%, rgba(236,72,153,.16), transparent 72%),
        radial-gradient(closest-side at 70% 30%, rgba(34,211,238,.14), transparent 72%);
      filter:blur(10px);opacity:.95;animation:hue 7.2s linear infinite;pointer-events:none;
    }
    @keyframes hue{0%{filter:blur(10px) hue-rotate(0deg)}100%{filter:blur(10px) hue-rotate(360deg)}}
    .logo img{position:absolute;inset:0;margin:auto;height:32px;width:auto;object-fit:contain;filter:drop-shadow(0 0 18px rgba(34,211,238,.14))}
    .k{font-size:10px;letter-spacing:.35em;text-transform:uppercase;color:var(--m)}
    .title{font-weight:950;letter-spacing:.06em}
    .nav{margin-left:auto;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .pill{
      padding:10px 14px;border-radius:999px;
      border:1px solid rgba(148,163,184,.28);
      background:rgba(15,23,42,.62);
      font-size:11px;letter-spacing:.22em;text-transform:uppercase;
      color:rgba(226,232,240,.95);
      transition:transform .16s ease,border-color .16s ease,background .16s ease;
      white-space:nowrap;
    }
    .pill:hover{transform:translateY(-1px);border-color:rgba(34,211,238,.65);background:rgba(15,23,42,.90)}
    .pill.hot{border-color:rgba(236,72,153,.60);box-shadow:0 0 0 1px rgba(236,72,153,.14),0 0 22px rgba(236,72,153,.10)}

    main{max-width:1240px;margin:0 auto;padding:18px 22px 44px}
    .glass{background:var(--panel);border:1px solid var(--stroke);border-radius:var(--r);backdrop-filter:blur(18px);box-shadow:var(--shadow)}
    .card{padding:18px;border-radius:28px}
    .h1{margin:10px 0 0;font-size:44px;line-height:1.05;font-weight:950}
    .grad{background-image:linear-gradient(90deg,var(--p),var(--pk),var(--c),var(--b));-webkit-background-clip:text;background-clip:text;color:transparent}
    .p{margin:10px 0 0;color:var(--m);line-height:1.6;font-size:14px;max-width:980px}
    .divider{height:1px;margin:14px 0;background:linear-gradient(90deg,transparent,rgba(34,211,238,.22),rgba(236,72,153,.18),transparent)}

    .topRow{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap}
    .chip{
      padding:10px 12px;border-radius:999px;
      border:1px solid rgba(148,163,184,.26);
      background:rgba(15,23,42,.60);
      font-size:11px;letter-spacing:.22em;text-transform:uppercase;
      color:rgba(226,232,240,.95);
      margin-left:auto;
      display:flex;gap:10px;align-items:center;
      white-space:nowrap;
    }
    .dot{width:8px;height:8px;border-radius:999px;background:rgba(245,158,11,.9);box-shadow:0 0 0 4px rgba(245,158,11,.18)}
    .dot.ok{background:rgba(34,211,238,.95);box-shadow:0 0 0 4px rgba(34,211,238,.18)}

    .btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{
      padding:11px 12px;border-radius:14px;
      border:1px solid rgba(148,163,184,.34);
      background:rgba(15,23,42,.72);
      color:rgba(226,232,240,.96);
      cursor:pointer;
      font-size:11px;letter-spacing:.18em;text-transform:uppercase;font-weight:900;
      transition:transform .16s ease,border-color .16s ease,background .16s ease;
      white-space:nowrap;
      display:inline-flex;align-items:center;justify-content:center;
    }
    .btn:hover{transform:translateY(-1px);border-color:rgba(34,211,238,.68);background:rgba(15,23,42,.92)}
    .btnHot{border-color:rgba(236,72,153,.62);box-shadow:0 0 0 1px rgba(236,72,153,.16),0 0 22px rgba(236,72,153,.10)}

    .grid{margin-top:14px;display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .panel{padding:16px;border-radius:22px;position:relative;overflow:hidden}
    .panel:before{
      content:"";position:absolute;inset:-2px;
      background:
        radial-gradient(560px 240px at 12% 12%, rgba(34,211,238,.12), transparent 60%),
        radial-gradient(560px 240px at 86% 16%, rgba(236,72,153,.10), transparent 60%),
        radial-gradient(560px 240px at 48% 90%, rgba(168,85,247,.08), transparent 60%);
      opacity:.95;pointer-events:none;
    }
    .panel>*{position:relative}

    table{width:100%;border-collapse:separate;border-spacing:0 10px}
    th{font-size:10px;letter-spacing:.3em;text-transform:uppercase;color:rgba(148,163,184,.95);text-align:left;padding:0 10px}
    td{
      padding:12px 10px;
      background:rgba(15,23,42,.55);
      border:1px solid rgba(148,163,184,.18);
    }
    tr td:first-child{border-radius:14px 0 0 14px}
    tr td:last-child{border-radius:0 14px 14px 0}
    .muted{color:rgba(148,163,184,.95)}
    .mono{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

    .lockBox{
      margin-top:12px;
      border:1px solid rgba(236,72,153,.26);
      background:rgba(236,72,153,.06);
      border-radius:22px;
      padding:14px;
    }
    .lockH{font-weight:950}
    .hide{display:none!important}
    .disabled{opacity:.45;pointer-events:none;filter:grayscale(1)}
  </style>
<script src="/js/tkfm-fx.js"></script>
  <script src="/js/tkfm-quick-checkout.js"></script>
  <script src="/js/tkfm-paid-lane-modal.js" defer></script>
  <script src="/js/tkfm-paid-lane-submit.js" defer></script>
</head>
<body data-tkfm-theme="radio">
<script>window.TKFM_FX&&TKFM_FX.mount({ theme: 'radio' });</script>
  <div class="bg"></div>

  <header>
    <div class="wrap">
      <a class="brand" href="index.html">
        <div class="logo" aria-hidden="true"><img src="/tkfm-radio-logo.png" alt="TKFM"/></div>
        <div>
          <div class="k">They Krave For Me Radio</div>
          <div class="title">DJ Schedule</div>
        </div>
      </a>

      <nav class="nav" aria-label="Schedule Nav">
        <a class="pill" href="radio-hub.html">Radio Hub</a>
        <a class="pill" href="dj-tools.html">DJ Toolkit</a>
        <a class="pill" href="dj-portal.html">DJ Portal</a>
        <a class="pill" href="pricing.html">Monthly Tiers</a>
        <a class="pill hot" href="index.html">Back to Station</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="glass card">
      <div class="topRow">
        <div>
          <div class="k">Public View</div>
          <div class="h1"><span class="grad">Station Schedule</span></div>
          <p class="p">Everyone can view the schedule. Only active DJ tier members can request/manage slots.</p>
          <div class="btnRow">
            <a class="btn" href="login.html">Member Sign In</a>
            <a class="btn btnHot" href="pricing.html">Activate DJ Tier</a>
          </div>
        </div>

        <div class="chip" id="tierChip">
          <span class="dot" id="tierDot"></span>
          <span id="tierText">Checking access…</span>
        </div>
      </div>

      <div class="divider"></div>

      <div class="grid">
        <div class="glass panel">
          <div class="k">Weekly Lineup</div>
          <p class="p" style="max-width:none;margin-top:8px">Edit these later — this is the clean public schedule view.</p>

          <table aria-label="TKFM schedule">
            <thead>
              <tr>
                <th style="width:18%">Day</th>
                <th style="width:22%">Time</th>
                <th>Show</th>
                <th style="width:26%">DJ</th>
              </tr>
            </thead>
            <tbody id="rows"></tbody>
          </table>

          <div class="divider"></div>
          <div class="k">Data Source</div>
          <div class="p mono" style="max-width:none;margin-top:8px">localStorage key: <span class="muted">tkfm_schedule</span></div>
        </div>

        <div class="glass panel">
          <div class="k">DJ Tools</div>
          <p class="p" style="max-width:none;margin-top:8px">DJ members can request slots. Public can view only.</p>

          <div class="lockBox hide" id="lockedBox">
            <div class="lockH">Slot requests are locked.</div>
            <div class="p" style="max-width:none;margin-top:6px">
              Activate DJ Toolkit to request/hold schedule slots and manage your show lane.
            </div>
            <div class="btnRow">
              <a class="btn btnHot" href="pricing.html">Get DJ Toolkit</a>
              <a class="btn" href="dj-tools.html">DJ Toolkit</a>
            </div>
          </div>

          <div id="djTools" class="disabled">
            <div class="divider"></div>
            <div class="k">Request a Slot (DJ Tier)</div>

            <div class="btnRow" style="margin-top:12px">
              <button class="btn btnHot" id="claimBtn" type="button">Request Selected Slot</button>
              <button class="btn" id="seedBtn" type="button">Seed Demo Schedule</button>
            </div>

            <p class="p" style="max-width:none;margin-top:10px">
              This is a placeholder UX. Next step is wiring schedule requests to your backend (Supabase/Netlify function).
            </p>
          </div>
        </div>
      </div>
    </section>

    <script>
      (function(){
        function get(k){ try{ return localStorage.getItem(k) || ''; } catch(e){ return ''; } }
        function set(k,v){ try{ localStorage.setItem(k, v); } catch(e){} }
        function parseJSON(v){ try{ return JSON.parse(v); } catch(e){ return null; } }

        function normalizeTier(raw){
          const v = String(raw || '').trim().toLowerCase();
          if(!v) return 'free';
          if(v === 'dj' || v.includes('dj')) return 'dj';
          if(v === 'creator' || v.includes('creator')) return 'creator';
          if(v === 'fan' || v.includes('fan')) return 'fan';
          if(v === 'label' || v.includes('label')) return 'label';
          if(v === 'elite') return 'creator';
          return 'free';
        }

        const memberTier = normalizeTier(get('tkfm_memberTier') || get('tkfm_creatorStatus') || get('tkfm_memberTierRequested'));
        const session = parseJSON(get('tkfm_member_session'));
        const signedIn = !!(session && session.id && session.email);

        const dot = document.getElementById('tierDot');
        const txt = document.getElementById('tierText');
        const locked = document.getElementById('lockedBox');
        const tools = document.getElementById('djTools');

        function setChip(label, ok){
          if(txt) txt.textContent = label;
          if(dot) dot.className = ok ? 'dot ok' : 'dot';
        }

        function loadSchedule(){
          const raw = get('tkfm_schedule');
          const data = parseJSON(raw) || [];
          return data;
        }

        function renderSchedule(){
          const tbody = document.getElementById('rows');
          if(!tbody) return;
          const data = loadSchedule();
          if(!data.length){
            tbody.innerHTML = '<tr><td colspan="4" style="background:rgba(15,23,42,.35);border:1px dashed rgba(148,163,184,.22);border-radius:14px;padding:14px;color:rgba(148,163,184,.95)">No schedule set yet.</td></tr>';
            return;
          }
          tbody.innerHTML = data.map(function(r){
            return '<tr>' +
              '<td>' + esc(r.day) + '</td>' +
              '<td>' + esc(r.time) + '</td>' +
              '<td>' + esc(r.show) + '</td>' +
              '<td class="muted">' + esc(r.dj || 'TBA') + '</td>' +
            '</tr>';
          }).join('');
        }

        function esc(s){
          return String(s||'').replace(/[&<>"]/g, function(c){
            return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]);
          });
        }

        function seed(){
          const demo = [
            { day:'Mon', time:'7–9 PM', show:'Evening Drive', dj:'DJ KRAVE' },
            { day:'Wed', time:'8–10 PM', show:'New Heat Night', dj:'TBA' },
            { day:'Fri', time:'9–11 PM', show:'Weekend Kickoff', dj:'TBA' },
            { day:'Sat', time:'6–8 PM', show:'Independent Artist Spotlight', dj:'TBA' },
            { day:'Sun', time:'7–9 PM', show:'Late Night Waves', dj:'TBA' }
          ];
          set('tkfm_schedule', JSON.stringify(demo));
          renderSchedule();
        }

        // Public schedule render always
        renderSchedule();

        // Gate DJ tools
        if(!signedIn){
          setChip('STATUS: PUBLIC VIEW', false);
          if(locked) locked.classList.remove('hide');
          if(tools) tools.classList.add('disabled');
          return;
        }

        if(memberTier !== 'dj'){
          setChip('TIER: ' + memberTier.toUpperCase() + ' (VIEW ONLY)', false);
          if(locked) locked.classList.remove('hide');
          if(tools) tools.classList.add('disabled');
          return;
        }

        setChip('TIER: DJ (CAN REQUEST SLOTS)', true);
        if(locked) locked.classList.add('hide');
        if(tools) tools.classList.remove('disabled');

        var seedBtn = document.getElementById('seedBtn');
        if(seedBtn) seedBtn.addEventListener('click', seed);

        var claimBtn = document.getElementById('claimBtn');
        if(claimBtn) claimBtn.addEventListener('click', function(){
          alert('Slot request captured (demo). Next power move: send this to Supabase/Netlify function.');
        });
      })();
    </script>
  </main>
  <script type="module" src="/js/tkfm-logo-resolver.js"></script>
<script src="/js/tkfm-checkout.js"></script>
<script src="/js/tkfm-paid-lane-modal.js"></script>
</body>
</html>
