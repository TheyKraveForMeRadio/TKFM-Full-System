<!doctype html>
<html lang="en">
<head>
  <meta name="tkfm-theme" content="radio" />
  <link rel="stylesheet" href="/css/tkfm-shell.css" />
  <link rel="stylesheet" href="/css/tkfm-radio.css" />
  <script src="/js/tkfm-shell.js" defer></script>

  <meta charset="utf-8">
  <title>TKFM ‚Äî DJ Schedule</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
    :root {
      --bg-deep: #020617;
      --bg-card: rgba(15,23,42,0.98);
      --bg-soft: rgba(17,24,39,0.96);
      --neon-pink: #ec4899;
      --neon-purple: #a855f7;
      --neon-cyan: #22d3ee;
      --neon-blue: #3b82f6;
      --neon-lime: #a3e635;
      --text-main: #f9fafb;
      --text-muted: #94a3b8;
      --text-soft: #64748b;
      --border-subtle: rgba(148,163,184,0.35);
    }

    * { box-sizing:border-box; margin:0; padding:0; }

    body {
      min-height:100vh;
      background:
        radial-gradient(circle at top,#020617 0,transparent 55%),
        radial-gradient(circle at top right,rgba(59,130,246,0.4) 0,transparent 60%),
        radial-gradient(circle at top left,rgba(236,72,153,0.5) 0,transparent 60%),
        linear-gradient(to bottom,#020617,#020617 55%,#000 100%);
      color:var(--text-main);
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",sans-serif;
      -webkit-font-smoothing:antialiased;
      padding:1.6rem .9rem 2.3rem;
      overflow-x:hidden;
    }

    a { color:inherit; text-decoration:none; }

    .shell { max-width:1120px; margin:0 auto; }

    /* NAV */
    .nav {
      margin:-1.6rem -.9rem 1.1rem;
      padding:.75rem .9rem;
      background:linear-gradient(to right,rgba(15,23,42,0.98),rgba(17,24,39,0.98));
      border-bottom:1px solid var(--border-subtle);
      backdrop-filter:blur(18px);
      display:flex;
      align-items:center;
      gap:.8rem;
    }
    .nav-left {
      display:flex;
      align-items:center;
      gap:.7rem;
    }
    .logo-orb {
      width:2.4rem;
      height:2.4rem;
      border-radius:999px;
      background:
        radial-gradient(circle at 10% 0,var(--neon-cyan),var(--neon-pink) 40%,var(--neon-purple) 80%);
      box-shadow:
        0 0 22px rgba(236,72,153,.9),
        0 0 24px rgba(59,130,246,.85);
      border:1px solid rgba(236,72,153,.9);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.8rem;
      font-weight:800;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:#020617;
    }
    .brand-text {
      display:flex;
      flex-direction:column;
      line-height:1.05;
    }
    .brand-kicker {
      font-size:.62rem;
      letter-spacing:.2em;
      text-transform:uppercase;
      color:var(--text-soft);
    }
    .brand-main {
      font-size:.95rem;
      font-weight:700;
    }

    .nav-right {
      margin-left:auto;
      display:flex;
      flex-wrap:wrap;
      gap:.4rem;
    }
    .nav-pill {
      font-size:.64rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      padding:.34rem .72rem;
      border-radius:999px;
      border:1px solid var(--border-subtle);
      background:var(--bg-soft);
      color:var(--text-soft);
      white-space:nowrap;
    }
    .nav-pill.primary {
      border-color:var(--neon-pink);
      color:#020617;
      background:linear-gradient(135deg,var(--neon-pink),var(--neon-purple));
      box-shadow:0 0 18px rgba(236,72,153,.85);
      font-weight:650;
    }

    @media(max-width:960px){
      .nav-right{display:none;}
    }

    /* HEADER */
    .hero {
      margin-bottom:1.2rem;
    }
    .hero-kicker {
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.26em;
      color:var(--text-soft);
      margin-bottom:.4rem;
    }
    .hero-title {
      font-size:clamp(2.1rem,3.5vw,2.6rem);
      font-weight:800;
      line-height:1.04;
      margin-bottom:.4rem;
    }
    .hero-title span {
      background:linear-gradient(135deg,var(--neon-pink),var(--neon-purple),var(--neon-cyan));
      background-clip:text;
      -webkit-background-clip:text;
      color:transparent;
    }
    .hero-sub {
      font-size:.86rem;
      color:var(--text-muted);
      max-width:40rem;
      margin-bottom:.6rem;
    }

    /* LAYOUT */
    .grid {
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);
      gap:.9rem;
      align-items:flex-start;
    }
    @media(max-width:960px){
      .grid{grid-template-columns:1fr;}
    }

    .card {
      border-radius:1rem;
      border:1px solid var(--border-subtle);
      background:var(--bg-card);
      padding:.85rem .9rem .95rem;
      box-shadow:0 0 24px rgba(0,0,0,0.95);
      font-size:.8rem;
    }
    .card-title {
      font-size:.92rem;
      font-weight:650;
      margin-bottom:.25rem;
    }
    .card-sub {
      font-size:.78rem;
      color:var(--text-muted);
      margin-bottom:.55rem;
    }

    .form-row {
      display:flex;
      flex-wrap:wrap;
      gap:.6rem;
      margin-bottom:.6rem;
    }
    .field {
      flex:1;
      min-width:160px;
    }
    .field-label {
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--text-soft);
      margin-bottom:.2rem;
    }
    .input, .select, .textarea {
      width:100%;
      border-radius:.65rem;
      border:1px solid var(--border-subtle);
      background:var(--bg-soft);
      padding:.44rem .6rem;
      font-size:.8rem;
      color:var(--text-main);
    }
    .textarea {
      min-height:70px;
      resize:vertical;
    }
    .small {
      font-size:.7rem;
      color:var(--text-soft);
      margin-top:.24rem;
    }

    .btn-main {
      font-size:.74rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      padding:.48rem 1.08rem;
      border-radius:999px;
      border:1px solid var(--neon-pink);
      background:linear-gradient(135deg,var(--neon-pink),var(--neon-purple));
      color:#020617;
      cursor:pointer;
      font-weight:650;
      box-shadow:0 0 18px rgba(236,72,153,.85);
      white-space:nowrap;
    }

    /* SCHEDULE GRID */
    .week-grid {
      display:grid;
      grid-template-columns:repeat(4,minmax(0,1fr));
      gap:.5rem;
      font-size:.76rem;
    }
    @media(max-width:900px){
      .week-grid{grid-template-columns:repeat(2,minmax(0,1fr));}
    }
    @media(max-width:640px){
      .week-grid{grid-template-columns:1fr;}
    }

    .day-col {
      border-radius:.9rem;
      border:1px solid var(--border-subtle);
      background:#020617;
      padding:.55rem .6rem .6rem;
    }
    .day-title {
      font-size:.76rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--text-soft);
      margin-bottom:.35rem;
    }

    .slot {
      border-radius:.7rem;
      border:1px solid rgba(148,163,184,0.7);
      background:rgba(15,23,42,0.96);
      padding:.35rem .45rem .38rem;
      margin-bottom:.35rem;
    }
    .slot-head {
      display:flex;
      justify-content:space-between;
      gap:.4rem;
      margin-bottom:.1rem;
    }
    .slot-time {
      font-size:.7rem;
      color:var(--neon-cyan);
      text-transform:uppercase;
      letter-spacing:.16em;
    }
    .slot-dj {
      font-size:.74rem;
      font-weight:600;
    }
    .slot-show {
      font-size:.74rem;
      color:var(--text-muted);
    }
    .slot-desc {
      font-size:.7rem;
      color:var(--text-soft);
      margin-top:.16rem;
    }
    .slot-footer {
      margin-top:.16rem;
      display:flex;
      justify-content:space-between;
      gap:.4rem;
      align-items:center;
      font-size:.68rem;
      color:var(--text-soft);
    }
    .btn-delete {
      border:none;
      background:none;
      color:#f97373;
      font-size:.68rem;
      cursor:pointer;
      text-transform:uppercase;
      letter-spacing:.14em;
    }

    .note {
      margin-top:.75rem;
      font-size:.7rem;
      color:var(--text-soft);
    }
    .note code { color:var(--neon-cyan); }
  </style>
</head>
<body>
  <div class="shell">
    <header class="nav">
      <div class="nav-left">
        <div class="logo-orb">DS</div>
        <div class="brand-text">
          <div class="brand-kicker">They Krave For Me Radio</div>
          <div class="brand-main">DJ Schedule</div>
        </div>
      </div>
      <nav class="nav-right">
        <a href="index.html" class="nav-pill">üè† Front Page</a>
        <a href="radio-hub.html" class="nav-pill primary">üìª Radio Hub</a>
        <a href="djs.html" class="nav-pill">üë§ DJ Lineup</a>
        <a href="god-view.html" class="nav-pill">GOD VIEW</a>
      </nav>
    </header>

    <section class="hero">
      <div class="hero-kicker">Programming grid</div>
      <h1 class="hero-title">
        Lock in the <span>weekly schedule</span> for TKFM DJs and shows.
      </h1>
      <p class="hero-sub">
        This page is your local programming board. Add shows by day and time, assign DJs, and keep a clean
        grid that matches what the AI DJ and Autopilot are doing behind the scenes.
      </p>
    </section>

    <section class="grid">
      <!-- CREATE SHOW -->
      <article class="card">
        <div class="card-title">Add / Edit Show Slot</div>
        <div class="card-sub">
          Slots save to <code>tkfm_dj_schedule</code> in localStorage. Later, you can mirror this into a
          database and display to listeners in other components.
        </div>

        <div class="form-row">
          <div class="field">
            <div class="field-label">DJ Name</div>
            <input id="inputDjName" class="input" placeholder="DJ KRAVE, Guest DJ, etc.">
          </div>
          <div class="field">
            <div class="field-label">Show Title</div>
            <input id="inputShowTitle" class="input" placeholder="Show name or theme">
          </div>
        </div>

        <div class="form-row">
          <div class="field">
            <div class="field-label">Day of Week</div>
            <select id="inputDay" class="select">
              <option value="monday">Monday</option>
              <option value="tuesday">Tuesday</option>
              <option value="wednesday">Wednesday</option>
              <option value="thursday">Thursday</option>
              <option value="friday">Friday</option>
              <option value="saturday">Saturday</option>
              <option value="sunday">Sunday</option>
            </select>
          </div>
          <div class="field">
            <div class="field-label">Time (local)</div>
            <input id="inputTime" class="input" placeholder="9:00 PM, 21:00, etc.">
          </div>
        </div>

        <div class="form-row">
          <div class="field" style="flex:1 0 100%;">
            <div class="field-label">Description</div>
            <textarea id="inputDesc" class="textarea" placeholder="What happens during this show?"></textarea>
          </div>
        </div>

        <div class="form-row">
          <button type="button" class="btn-main" id="btnAddSlot">Add Show Slot</button>
        </div>

        <div class="small">
          Tip: keep the time text consistent (e.g. "8:00 PM") so listeners understand the grid at a glance.
        </div>
      </article>

      <!-- WEEK VIEW -->
      <article class="card">
        <div class="card-title">Weekly View</div>
        <div class="card-sub">
          A simple weekly grid showing current slots for each day. Delete a slot if plans change and re-add
          with a new time or description.
        </div>

        <div class="week-grid" id="weekGrid">
          <!-- JS days with slots -->
        </div>

        <div class="note">
          Structure: <code>tkfm_dj_schedule = [{ id, djName, showTitle, day, time, description, createdAt }]</code>.
          You can read this in other pages (like the radio hub or DJ lineup) to surface programming times to
          fans.
        </div>
      </article>
    </section>
  </div>

  <script>
    (function(){
      const KEY_SCHEDULE = 'tkfm_dj_schedule';
      const DAYS = ['monday','tuesday','wednesday','thursday','friday','saturday','sunday'];

      function safeParseSchedule() {
        try {
          const raw = localStorage.getItem(KEY_SCHEDULE);
          if (!raw) return [];
          const v = JSON.parse(raw);
          if (!Array.isArray(v)) return [];
          return v;
        } catch(e) {
          console.warn('schedule parse error', e);
          return [];
        }
      }

      function saveSchedule(list) {
        localStorage.setItem(KEY_SCHEDULE, JSON.stringify(list));
      }

      function addSlot() {
        const djName = document.getElementById('inputDjName').value.trim();
        const showTitle = document.getElementById('inputShowTitle').value.trim();
        const day = document.getElementById('inputDay').value;
        const time = document.getElementById('inputTime').value.trim();
        const description = document.getElementById('inputDesc').value.trim();

        if (!djName || !showTitle || !time) {
          alert('DJ name, show title and time are required.');
          return;
        }

        const list = safeParseSchedule();
        list.push({
          id: Date.now() + '-' + Math.random().toString(16).slice(2),
          djName,
          showTitle,
          day,
          time,
          description,
          createdAt: Date.now()
        });
        saveSchedule(list);
        renderWeek();
        document.getElementById('inputShowTitle').value = '';
        document.getElementById('inputTime').value = '';
        document.getElementById('inputDesc').value = '';
      }

      function deleteSlot(id) {
        const list = safeParseSchedule();
        const next = list.filter(s => s.id !== id);
        saveSchedule(next);
        renderWeek();
      }

      function renderWeek() {
        const container = document.getElementById('weekGrid');
        if (!container) return;
        container.innerHTML = '';

        const list = safeParseSchedule();

        DAYS.forEach(day => {
          const col = document.createElement('div');
          col.className = 'day-col';

          const title = document.createElement('div');
          title.className = 'day-title';
          title.textContent = day.toUpperCase();
          col.appendChild(title);

          const daySlots = list
            .filter(s => s.day === day)
            .sort((a,b) => (a.time || '').localeCompare(b.time || ''));

          if (!daySlots.length) {
            const empty = document.createElement('div');
            empty.className = 'slot';
            empty.style.opacity = '0.7';
            empty.textContent = 'No shows scheduled yet.';
            col.appendChild(empty);
          } else {
            daySlots.forEach(slot => {
              const el = document.createElement('div');
              el.className = 'slot';

              const head = document.createElement('div');
              head.className = 'slot-head';

              const time = document.createElement('div');
              time.className = 'slot-time';
              time.textContent = slot.time || '';

              const dj = document.createElement('div');
              dj.className = 'slot-dj';
              dj.textContent = slot.djName || '';

              head.appendChild(time);
              head.appendChild(dj);

              const show = document.createElement('div');
              show.className = 'slot-show';
              show.textContent = slot.showTitle || '';

              const desc = document.createElement('div');
              desc.className = 'slot-desc';
              desc.textContent = slot.description || '';

              const footer = document.createElement('div');
              footer.className = 'slot-footer';

              const created = document.createElement('div');
              created.textContent = 'Added';

              const btnDel = document.createElement('button');
              btnDel.className = 'btn-delete';
              btnDel.textContent = 'Remove';
              btnDel.addEventListener('click', function(){
                if (confirm('Remove this show from the schedule?')) {
                  deleteSlot(slot.id);
                }
              });

              footer.appendChild(created);
              footer.appendChild(btnDel);

              el.appendChild(head);
              el.appendChild(show);
              if (slot.description) el.appendChild(desc);
              el.appendChild(footer);

              col.appendChild(el);
            });
          }

          container.appendChild(col);
        });
      }

      function initSchedule() {
        const btn = document.getElementById('btnAddSlot');
        if (btn) btn.addEventListener('click', addSlot);
        renderWeek();
      }

      window.addEventListener('DOMContentLoaded', initSchedule);
    })();
  </script>
</body>
</html>
