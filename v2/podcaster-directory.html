<!doctype html>
<html lang="en">
<head>
  <title>Podcaster Directory â€” TKFM</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{
      background:#020617;
      background-image:
        radial-gradient(circle at 0 0,rgba(56,189,248,0.18),transparent 55%),
        radial-gradient(circle at 100% 0,rgba(236,72,153,0.22),transparent 55%),
        radial-gradient(circle at 50% 100%,rgba(168,85,247,0.18),transparent 55%);
    }
    .card{background:rgba(2,6,23,.55);border:1px solid rgba(148,163,184,.18)}
  </style>
</head>
<body class="text-slate-50 min-h-screen">
  <header class="border-b border-slate-800/80 bg-black/80 backdrop-blur-xl">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center gap-4">
      <a href="index.html" class="flex items-center gap-3">
        <img src="/tkfm-radio-logo.png" class="h-9 w-auto object-contain" alt="TKFM"/>
        <div class="leading-tight">
          <p class="text-[0.6rem] uppercase tracking-[0.35em] text-slate-400">They Krave For Me Radio</p>
          <p class="text-sm font-semibold">Podcaster Directory</p>
        </div>
      </a>
      <nav class="ml-auto flex flex-wrap gap-2 text-[0.7rem] uppercase tracking-[0.22em]">
        <a href="podcast-engine.html" class="px-3 py-1 rounded-full border border-emerald-400/80 bg-emerald-400/10 text-emerald-200">ðŸŽ™ Podcast Engine</a>
        <a href="podcaster-dashboard.html" class="px-3 py-1 rounded-full border border-sky-400/80 bg-sky-400/10 text-sky-200">ðŸ§© Create Show Page</a>
        <a href="podcaster-live.html" class="px-3 py-1 rounded-full border border-red-400/80 bg-red-400/10 text-red-200">ðŸ”´ Live</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pt-8 pb-14 space-y-6">
    <h1 class="text-3xl md:text-5xl font-extrabold">Discover TKFM Podcasts</h1>
    <p class="text-slate-200/85 max-w-4xl">
      This directory powers the Radio + TV side for podcasters. Each show has a clean page for listeners to open and follow.
    </p>

    <div id="grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>

    <div id="empty" class="card rounded-2xl p-6 hidden">
      <h2 class="text-2xl font-extrabold">No shows yet</h2>
      <p class="text-slate-200/85 mt-2">Create the first show page from the Podcaster Dashboard.</p>
      <a class="inline-block mt-4 px-4 py-2 rounded-full border border-sky-400/80 bg-sky-400/10 text-sky-200 text-xs uppercase tracking-[0.22em] font-extrabold" href="podcaster-dashboard.html">Create Show Page</a>
    </div>
  </main>

  <footer class="border-t border-slate-800/80 bg-black/80 backdrop-blur-xl">
    <div class="max-w-6xl mx-auto px-4 py-6 text-xs text-slate-400 flex flex-wrap items-center justify-between gap-3">
      <p>Â© <span id="year"></span> They Krave For Me Radio</p>
      <div class="flex gap-2 flex-wrap">
        <a class="hover:text-slate-200" href="podcast-engine.html">Podcast Engine</a><span>â€¢</span>
        <a class="hover:text-slate-200" href="radio-tv.html">Radio TV</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function safe(s){ return String(s||'').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    function card(p){
      const cover = p.coverUrl ? p.coverUrl : 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="260"><rect width="100%" height="100%" fill="#020617"/><text x="50%" y="50%" font-family="Arial" font-size="18" fill="#94a3b8" text-anchor="middle" dominant-baseline="middle">TKFM Podcast</text></svg>');
      return `
        <div class="card rounded-2xl overflow-hidden">
          <img src="${cover}" alt="cover" class="w-full h-40 object-cover border-b border-slate-700/50 bg-black/30"/>
          <div class="p-5">
            <p class="text-slate-400 text-xs uppercase tracking-[0.28em]">Podcast</p>
            <h3 class="text-xl font-extrabold mt-2">${safe(p.showName||'')}</h3>
            <p class="text-slate-200/85 text-sm mt-2">${p.hostName ? 'Hosted by ' + safe(p.hostName) : ''}</p>
            <p class="text-slate-400 text-sm mt-1">${safe(p.category||'')}</p>
            <p class="text-slate-200/85 text-sm mt-3 line-clamp-3">${safe(p.bio||'')}</p>
            <div class="mt-4 flex flex-wrap gap-2">
              <a href="podcaster-show.html?slug=${encodeURIComponent(p.slug||'')}" class="px-4 py-2 rounded-full border border-emerald-500/40 bg-emerald-500/10 text-emerald-100 text-xs uppercase tracking-[0.22em] font-extrabold hover:bg-emerald-500/15">Open Show</a>
              <a href="podcaster-live.html" class="px-4 py-2 rounded-full border border-red-500/40 bg-red-500/10 text-red-100 text-xs uppercase tracking-[0.22em] font-extrabold hover:bg-red-500/15">Request Live</a>
            </div>
          </div>
        </div>
      `;
    }

    async function load(){
      const res = await fetch('/.netlify/functions/podcaster-profile-get?limit=24');
      const out = await res.json().catch(()=>({}));
      const list = (out && out.profiles && Array.isArray(out.profiles)) ? out.profiles : [];
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      if (!list.length){
        document.getElementById('empty').classList.remove('hidden');
        return;
      }
      for (const p of list){
        grid.insertAdjacentHTML('beforeend', card(p));
      }
    }

    load();
  </script>
<script src="/js/tkfm-paid-lane-modal.js"></script>
</body>
</html>
