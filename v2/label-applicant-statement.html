<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TKFM Records ‚Äî Applicant Statement</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
    :root {
      --bg-deep: #020617;
      --bg-card: rgba(6,8,20,0.98);
      --bg-soft: rgba(15,23,42,0.96);
      --gold: #facc15;
      --gold-deep: #eab308;
      --amber: #f97316;
      --accent-purple: #a855f7;
      --accent-pink: #ec4899;
      --accent-cyan: #22d3ee;
      --text-main: #f9fafb;
      --text-muted: #94a3b8;
      --text-soft: #64748b;
      --border-subtle: rgba(148,163,184,0.35);
    }

    * { box-sizing:border-box; margin:0; padding:0; }

    body {
      min-height:100vh;
      background:
        radial-gradient(circle at top,#111827 0,transparent 52%),
        radial-gradient(circle at top right,rgba(234,179,8,0.55) 0,transparent 60%),
        radial-gradient(circle at top left,rgba(248,113,113,0.45) 0,transparent 60%),
        linear-gradient(to bottom,#020617,#020617 55%,#000 100%);
      color:var(--text-main);
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",sans-serif;
      -webkit-font-smoothing:antialiased;
      padding:1.6rem .9rem 2.3rem;
      overflow-x:hidden;
    }

    a { color:inherit; text-decoration:none; }

    .shell { max-width:960px; margin:0 auto; }

    /* NAV */
    .nav {
      margin:-1.6rem -.9rem 1.1rem;
      padding:.75rem .9rem;
      background:linear-gradient(to right,rgba(6,8,20,0.98),rgba(15,23,42,0.98));
      border-bottom:1px solid var(--border-subtle);
      backdrop-filter:blur(16px);
      display:flex;
      align-items:center;
      gap:.8rem;
    }
    .logo-orb {
      width:2.3rem;
      height:2.3rem;
      border-radius:999px;
      background:
        radial-gradient(circle at 10% 0,var(--gold),var(--amber) 40%,var(--accent-purple) 80%);
      box-shadow:
        0 0 20px rgba(250,204,21,.9),
        0 0 22px rgba(248,113,113,.85);
      border:1px solid rgba(250,204,21,.9);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.7rem;
      font-weight:800;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:#020617;
    }
    .brand-text {
      display:flex;
      flex-direction:column;
      line-height:1.05;
    }
    .brand-kicker {
      font-size:.6rem;
      letter-spacing:.2em;
      text-transform:uppercase;
      color:var(--text-soft);
    }
    .brand-main {
      font-size:.9rem;
      font-weight:650;
    }
    .nav-right {
      margin-left:auto;
      display:flex;
      gap:.4rem;
      flex-wrap:wrap;
    }
    .nav-pill {
      font-size:.64rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      padding:.32rem .7rem;
      border-radius:999px;
      border:1px solid var(--border-subtle);
      background:var(--bg-soft);
      color:var(--text-soft);
    }
    .nav-pill.gold {
      border-color:var(--gold);
      color:#020617;
      background:linear-gradient(135deg,var(--gold),var(--amber));
      box-shadow:0 0 18px rgba(250,204,21,.9);
      font-weight:650;
    }

    @media(max-width:900px){
      .nav-right{display:none;}
    }

    /* HEADER */
    .head-kicker {
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.26em;
      color:var(--text-soft);
      margin-bottom:.4rem;
    }
    .head-title {
      font-size:clamp(2rem,3.4vw,2.4rem);
      font-weight:800;
      line-height:1.04;
      margin-bottom:.35rem;
    }
    .head-title span {
      background:linear-gradient(135deg,var(--gold),var(--amber),var(--accent-pink));
      background-clip:text;
      -webkit-background-clip:text;
      color:transparent;
    }
    .head-sub {
      font-size:.84rem;
      color:var(--text-muted);
      margin-bottom:.9rem;
    }

    /* CARD */
    .card {
      border-radius:1rem;
      border:1px solid var(--border-subtle);
      background:var(--bg-card);
      padding:.85rem .9rem .95rem;
      box-shadow:0 0 24px rgba(0,0,0,0.95);
      font-size:.78rem;
      position:relative;
      overflow:hidden;
      margin-bottom:1.1rem;
    }
    .card::before {
      content:"";
      position:absolute;
      inset:-45%;
      opacity:0;
      background:conic-gradient(from 135deg,var(--gold),var(--amber),var(--accent-pink),var(--accent-purple),var(--gold));
      filter:blur(24px);
      z-index:-1;
      transition:opacity .22s ease-out;
    }
    .card:hover::before { opacity:.22; }

    .card-title {
      font-size:.96rem;
      font-weight:650;
      margin-bottom:.25rem;
    }
    .card-sub {
      font-size:.78rem;
      color:var(--text-muted);
      margin-bottom:.6rem;
    }

    .form-row {
      display:flex;
      flex-wrap:wrap;
      gap:.6rem;
      align-items:flex-end;
      margin-bottom:.65rem;
    }
    .field {
      flex:1;
      min-width:190px;
    }
    .field-label {
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--text-soft);
      margin-bottom:.22rem;
    }
    .input {
      width:100%;
      border-radius:.6rem;
      border:1px solid var(--border-subtle);
      background:var(--bg-soft);
      padding:.45rem .55rem;
      font-size:.8rem;
      color:var(--text-main);
    }
    .small {
      font-size:.7rem;
      color:var(--text-soft);
      margin-top:.24rem;
    }

    .btn-main {
      font-size:.72rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      padding:.48rem 1.05rem;
      border-radius:999px;
      border:1px solid var(--gold);
      background:linear-gradient(135deg,var(--gold),var(--amber));
      color:#020617;
      cursor:pointer;
      font-weight:650;
      box-shadow:0 0 18px rgba(250,204,21,.9);
      white-space:nowrap;
    }

    .pill-role {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:.18rem .45rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      font-size:.64rem;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:var(--text-soft);
      margin-top:.3rem;
    }

    .mono {
      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    /* STAT GRID */
    .stat-grid {
      display:grid;
      grid-template-columns:repeat(3,minmax(0,1fr));
      gap:.55rem;
      margin-bottom:.6rem;
    }
    @media(max-width:720px){
      .stat-grid{grid-template-columns:repeat(2,minmax(0,1fr));}
    }
    .stat {
      border-radius:.8rem;
      border:1px solid var(--border-subtle);
      background:var(--bg-soft);
      padding:.45rem .55rem .5rem;
      font-size:.72rem;
    }
    .stat-label {
      font-size:.62rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--text-soft);
      margin-bottom:.12rem;
    }
    .stat-value {
      font-size:.96rem;
      font-weight:700;
      color:var(--gold);
    }
    .stat-sub {
      font-size:.68rem;
      color:var(--text-soft);
      margin-top:.05rem;
    }

    /* SECTIONS */
    .section-title {
      font-size:.8rem;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--text-soft);
      margin:.45rem 0 .3rem;
    }

    .scroll-box {
      border-radius:.85rem;
      border:1px solid var(--border-subtle);
      background:#020617;
      max-height:260px;
      overflow:auto;
      font-size:.74rem;
    }
    .row {
      padding:.45rem .6rem;
      border-bottom:1px solid rgba(15,23,42,0.9);
      display:flex;
      justify-content:space-between;
      gap:.45rem;
    }
    .row:nth-child(odd){
      background:rgba(15,23,42,0.92);
    }
    .row:nth-child(even){
      background:rgba(6,8,20,0.96);
    }
    .row-main { flex:1; }
    .row-title {
      font-weight:600;
      margin-bottom:.03rem;
    }
    .row-sub {
      font-size:.7rem;
      color:var(--text-soft);
    }
    .row-meta {
      font-size:.68rem;
      color:var(--text-soft);
      margin-top:.16rem;
    }
    .row-right {
      text-align:right;
      font-size:.7rem;
      color:var(--text-soft);
      min-width:5.5rem;
    }

    .tag {
      display:inline-block;
      margin-left:.25rem;
      padding:.16rem .36rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      text-transform:uppercase;
      letter-spacing:.15em;
      font-size:.6rem;
    }
    .tag.watch { border-color:var(--accent-purple); color:var(--accent-purple); }
    .tag.offer { border-color:var(--accent-pink); color:var(--accent-pink); }
    .tag.sponsor { border-color:var(--gold); color:var(--gold); }

    .note {
      margin-top:.8rem;
      font-size:.7rem;
      color:var(--text-soft);
    }
    .note code { color:var(--accent-cyan); }
  </style>
<script src="/js/tkfm-fx.js"></script>
</head>
<body data-tkfm-theme="label">
<script>window.TKFM_FX&&TKFM_FX.mount({ theme: 'label' });</script>
  <div class="shell">
    <header class="nav">
      <div class="logo-orb">LA</div>
      <div class="brand-text">
        <div class="brand-kicker">TKFM Records</div>
        <div class="brand-main">Label Applicant Statement</div>
      </div>
      <div class="nav-right">
        <a href="label-home.html" class="nav-pill">üèõ Label Home</a>
        <a href="label-hub.html" class="nav-pill">üìÇ Label Hub</a>
        <a href="label-revenue-console.html" class="nav-pill gold">üí∞ Revenue</a>
        <a href="creator-statement.html" class="nav-pill">üìÑ Creator View</a>
        <a href="god-view.html" class="nav-pill">GOD VIEW</a>
      </div>
    </header>

    <section>
      <div class="head-kicker">A&R / Label View</div>
      <h1 class="head-title">
        One <span>statement per applicant</span> ‚Äî spend, spins, tags and contracts.
      </h1>
      <p class="head-sub">
        Use this when reviewing TKFM Records applications. Type the applicant‚Äôs email or creator name, and we will
        pull a label-facing snapshot from your local TKFM data: uploads, mixtape orders, social campaigns, AI DJ
        spins and label tag level.
      </p>
    </section>

    <!-- SEARCH / SUMMARY -->
    <section class="card">
      <div class="card-title">Lookup an applicant.</div>
      <div class="card-sub">
        Searches <span class="mono">artistUploads</span>, <span class="mono">mixtapeOrders</span>,
        <span class="mono">tkfm_social_campaigns</span>, <span class="mono">tkfm_ai_dj_history</span> and
        <span class="mono">tkfm_social_label_tags</span>. Best match wins.
      </div>

      <div class="form-row">
        <div class="field">
          <div class="field-label">Email or creator name</div>
          <input id="inputIdentifier" class="input" placeholder="example@mail.com or Artist / DJ / Producer Name">
          <div class="small">Use the same email or name they used on uploads / orders / campaigns.</div>
        </div>
        <button type="button" class="btn-main" id="btnLookup">Load Applicant</button>
      </div>

      <div id="applicantHeader" style="margin-top:.4rem;">
        <!-- JS header -->
      </div>

      <div class="stat-grid">
        <div class="stat">
          <div class="stat-label">Artist Uploads</div>
          <div class="stat-value" id="statUploads">0</div>
          <div class="stat-sub">Tracks in your review pipeline.</div>
        </div>
        <div class="stat">
          <div class="stat-label">Mixtape Spend</div>
          <div class="stat-value" id="statMixSpend">$0</div>
          <div class="stat-sub">Total booked with TKFM.</div>
        </div>
        <div class="stat">
          <div class="stat-label">Social Spend</div>
          <div class="stat-value" id="statSocialSpend">$0</div>
          <div class="stat-sub">Promo campaigns bought.</div>
        </div>
      </div>

      <div class="stat-grid">
        <div class="stat">
          <div class="stat-label">AI DJ Spins</div>
          <div class="stat-value" id="statSpins">0</div>
          <div class="stat-sub">Spins found in AI DJ history.</div>
        </div>
        <div class="stat">
          <div class="stat-label">Label Tag Level</div>
          <div class="stat-value" id="statTagLevel">‚Äî</div>
          <div class="stat-sub">WATCH / OFFER / SPONSOR if applied.</div>
        </div>
        <div class="stat">
          <div class="stat-label">Contract Snapshot</div>
          <div class="stat-value" id="statContract">‚Äî</div>
          <div class="stat-sub">Reads latest TKFM contract if saved.</div>
        </div>
      </div>

      <div class="section-title">Uploads / submissions</div>
      <div class="scroll-box" id="listUploads">
        <!-- JS -->
      </div>

      <div class="section-title">Mixtape orders</div>
      <div class="scroll-box" id="listMix">
        <!-- JS -->
      </div>

      <div class="section-title">Social campaigns</div>
      <div class="scroll-box" id="listSocial">
        <!-- JS -->
      </div>

      <div class="section-title">AI DJ spins</div>
      <div class="scroll-box" id="listSpins">
        <!-- JS -->
      </div>

      <div class="note">
        This is a local label-facing snapshot powered by your browser‚Äôs
        <code>artistUploads</code>, <code>mixtapeOrders</code>, <code>tkfm_social_campaigns</code>,
        <code>tkfm_social_label_tags</code>, <code>tkfm_ai_dj_history</code> and (optionally)
        <code>tkfm_contract_latest</code>. When you hook up a database, you can mirror the same view off server
        data.
      </div>
    </section>
  </div>

  <script>
    (function(){
      const KEY_UPLOADS = 'artistUploads';
      const KEY_MIX = 'mixtapeOrders';
      const KEY_SOCIAL = 'tkfm_social_campaigns';
      const KEY_LABEL_TAGS = 'tkfm_social_label_tags';
      const KEY_HISTORY = 'tkfm_ai_dj_history';
      const KEY_CONTRACT = 'tkfm_contract_latest';

      function safeParse(key, fallback) {
        try {
          const raw = localStorage.getItem(key);
          if (!raw) return fallback;
          const v = JSON.parse(raw);
          return (v === null || typeof v === 'undefined') ? fallback : v;
        } catch (e) {
          console.warn('parse error for', key, e);
          return fallback;
        }
      }

      function formatMoney(n) {
        const num = Number(n || 0);
        if (!isFinite(num)) return '$0';
        return '$' + num.toFixed(0);
      }

      function formatTime(ts) {
        if (!ts) return '‚Äî';
        const d = new Date(ts);
        if (isNaN(d.getTime())) return '‚Äî';
        return d.toLocaleString();
      }

      function normalize(str) {
        if (!str) return '';
        return String(str).trim().toLowerCase();
      }

      function chooseBestName(entry) {
        if (!entry) return null;
        return entry.artistName || entry.creatorName || entry.djName || entry.clientName || entry.name || entry.email || null;
      }

      function detectRole(mixMatch, socialMatch, uploadMatch) {
        const fromSocial = socialMatch && socialMatch.role;
        if (fromSocial) return fromSocial;
        if (mixMatch && mixMatch.role) return mixMatch.role;
        if (uploadMatch && uploadMatch.role) return uploadMatch.role;
        return 'applicant';
      }

      function matchByIdentifier(identifier, list, fields) {
        const idNorm = normalize(identifier);
        if (!Array.isArray(list) || !idNorm) return [];
        return list.filter(item => {
          return fields.some(f => normalize(item[f]) === idNorm);
        });
      }

      function findUploads(identifier, uploads) {
        return matchByIdentifier(identifier, uploads, ['email', 'artistEmail', 'artistName', 'creatorName']);
      }

      function findMixtapes(identifier, mixOrders) {
        return matchByIdentifier(identifier, mixOrders, ['email', 'contact', 'artistName', 'clientName', 'djName', 'creatorName']);
      }

      function findSocial(identifier, campaigns) {
        return matchByIdentifier(identifier, campaigns, ['email', 'creatorName', 'artistName', 'djName']);
      }

      function findSpins(name, history) {
        const target = normalize(name);
        if (!target) return [];
        if (!Array.isArray(history)) return [];
        return history.filter(spin => normalize(spin.artistName) === target);
      }

      function summarizeTags(campaigns, tagsMap) {
        let watch = false, offer = false, sponsor = false;
        if (!Array.isArray(campaigns) || !tagsMap || typeof tagsMap !== 'object') {
          return { level:'‚Äî', watch:false, offer:false, sponsor:false };
        }

        campaigns.forEach(c => {
          const id = c.id || String(c.createdAt || '');
          const t = tagsMap[id];
          if (!t) return;
          if (t.watch) watch = true;
          if (t.offer) offer = true;
          if (t.sponsor) sponsor = true;
        });

        let level = '‚Äî';
        if (sponsor) level = 'SPONSOR';
        else if (offer) level = 'OFFER';
        else if (watch) level = 'WATCH';

        return { level, watch, offer, sponsor };
      }

      function summarizeContract(latest, identifier) {
        if (!latest) return '‚Äî';
        try {
          if (Array.isArray(latest)) {
            const idNorm = normalize(identifier);
            const match = latest.find(c =>
              normalize(c.artistName) === idNorm ||
              normalize(c.email) === idNorm
            );
            if (!match) return '‚Äî';
            return (match.status || 'Draft') + ' ' + (match.contractType || 'Deal');
          }
          if (typeof latest === 'object') {
            return (latest.status || 'Draft') + ' ' + (latest.contractType || 'Deal');
          }
        } catch(e) {
          return '‚Äî';
        }
        return '‚Äî';
      }

      function renderHeader(name, role) {
        const box = document.getElementById('applicantHeader');
        if (!box) return;
        box.innerHTML = '';

        const title = document.createElement('div');
        title.textContent = name || 'No matches yet.';
        title.style.fontWeight = '600';
        title.style.fontSize = '.86rem';

        const pill = document.createElement('span');
        pill.className = 'pill-role';
        pill.textContent = String(role || 'applicant').toUpperCase();

        box.appendChild(title);
        box.appendChild(pill);
      }

      function renderStats(uploads, mix, social, spins, tagSummary, contractText) {
        const uploadCount = uploads.length;
        const mixSpend = mix.reduce((sum, o) => sum + Number(o.price || o.amount || 0), 0);
        const socialSpend = social.reduce((sum, c) => sum + Number(c.price || c.amount || 0), 0);

        const elUploads = document.getElementById('statUploads');
        const elMix = document.getElementById('statMixSpend');
        const elSocial = document.getElementById('statSocialSpend');
        const elSpins = document.getElementById('statSpins');
        const elTag = document.getElementById('statTagLevel');
        const elContract = document.getElementById('statContract');

        if (elUploads) elUploads.textContent = uploadCount;
        if (elMix) elMix.textContent = formatMoney(mixSpend);
        if (elSocial) elSocial.textContent = formatMoney(socialSpend);
        if (elSpins) elSpins.textContent = spins.length;
        if (elTag) elTag.textContent = tagSummary.level || '‚Äî';
        if (elContract) elContract.textContent = contractText || '‚Äî';
      }

      function renderUploads(list) {
        const box = document.getElementById('listUploads');
        if (!box) return;
        box.innerHTML = '';

        if (!list.length) {
          const div = document.createElement('div');
          div.style.padding = '0.55rem 0.6rem';
          div.style.color = '#9ca3af';
          div.textContent = 'No artist uploads found for this applicant.';
          box.appendChild(div);
          return;
        }

        list.slice().reverse().forEach(u => {
          const row = document.createElement('div');
          row.className = 'row';

          const main = document.createElement('div');
          main.className = 'row-main';

          const title = document.createElement('div');
          title.className = 'row-title';
          title.textContent = u.title || u.trackTitle || 'Uploaded Track';

          const sub = document.createElement('div');
          sub.className = 'row-sub';
          const name = u.artistName || u.creatorName || 'Unknown';
          sub.textContent = name + ' ‚Ä¢ ' + (u.email || u.artistEmail || '');

          const meta = document.createElement('div');
          meta.className = 'row-meta';
          meta.textContent = (u.status || 'pending') + ' ‚Ä¢ ' + formatTime(u.createdAt || u.timestamp);

          main.appendChild(title);
          main.appendChild(sub);
          main.appendChild(meta);

          const right = document.createElement('div');
          right.className = 'row-right';
          right.textContent = u.genre || u.style || '';

          row.appendChild(main);
          row.appendChild(right);
          box.appendChild(row);
        });
      }

      function renderMix(list) {
        const box = document.getElementById('listMix');
        if (!box) return;
        box.innerHTML = '';

        if (!list.length) {
          const div = document.createElement('div');
          div.style.padding = '0.55rem 0.6rem';
          div.style.color = '#9ca3af';
          div.textContent = 'No mixtape orders found for this applicant.';
          box.appendChild(div);
          return;
        }

        list.slice().reverse().forEach(o => {
          const row = document.createElement('div');
          row.className = 'row';

          const main = document.createElement('div');
          main.className = 'row-main';

          const title = document.createElement('div');
          title.className = 'row-title';
          const tier = o.tier || o.plan || 'Mixtape Project';
          title.textContent = tier + ' ‚Äî ' + (o.projectTitle || o.projectName || 'Mixtape');

          const sub = document.createElement('div');
          sub.className = 'row-sub';
          sub.textContent = (o.status || 'pending') + ' ‚Ä¢ ' + (o.email || o.contact || '');

          const meta = document.createElement('div');
          meta.className = 'row-meta';
          meta.textContent = formatTime(o.createdAt || o.timestamp);

          main.appendChild(title);
          main.appendChild(sub);
          main.appendChild(meta);

          const right = document.createElement('div');
          right.className = 'row-right';
          right.textContent = formatMoney(o.price || o.amount || 0);

          row.appendChild(main);
          row.appendChild(right);
          box.appendChild(row);
        });
      }

      function renderSocial(list, tagsMap) {
        const box = document.getElementById('listSocial');
        if (!box) return;
        box.innerHTML = '';

        if (!list.length) {
          const div = document.createElement('div');
          div.style.padding = '0.55rem 0.6rem';
          div.style.color = '#9ca3af';
          div.textContent = 'No social campaigns found for this applicant.';
          box.appendChild(div);
          return;
        }

        list.slice().reverse().forEach(c => {
          const row = document.createElement('div');
          row.className = 'row';

          const main = document.createElement('div');
          main.className = 'row-main';

          const title = document.createElement('div');
          title.className = 'row-title';
          title.textContent = (c.packageName || c.tier || 'Social Campaign') + ' ‚Äî ' + (c.platform || 'Multi-platform');

          const sub = document.createElement('div');
          sub.className = 'row-sub';
          sub.textContent = 'Role: ' + (c.role || 'creator') + ' ‚Ä¢ ' + (c.email || '');

          const meta = document.createElement('div');
          meta.className = 'row-meta';
          meta.textContent = (c.status || 'active') + ' ‚Ä¢ ' + formatTime(c.createdAt || c.timestamp);

          main.appendChild(title);
          main.appendChild(sub);
          main.appendChild(meta);

          const right = document.createElement('div');
          right.className = 'row-right';
          right.textContent = formatMoney(c.price || c.amount || 0);

          const id = c.id || String(c.createdAt || '');
          const t = tagsMap && tagsMap[id] ? tagsMap[id] : null;
          if (t && (t.watch || t.offer || t.sponsor)) {
            const wrap = document.createElement('div');
            if (t.watch) {
              const tag = document.createElement('span');
              tag.className = 'tag watch';
              tag.textContent = 'WATCH';
              wrap.appendChild(tag);
            }
            if (t.offer) {
              const tag = document.createElement('span');
              tag.className = 'tag offer';
              tag.textContent = 'OFFER';
              wrap.appendChild(tag);
            }
            if (t.sponsor) {
              const tag = document.createElement('span');
              tag.className = 'tag sponsor';
              tag.textContent = 'SPONSOR';
              wrap.appendChild(tag);
            }
            right.appendChild(document.createElement('br'));
            right.appendChild(wrap);
          }

          row.appendChild(main);
          row.appendChild(right);
          box.appendChild(row);
        });
      }

      function renderSpins(list) {
        const box = document.getElementById('listSpins');
        if (!box) return;
        box.innerHTML = '';

        if (!list.length) {
          const div = document.createElement('div');
          div.style.padding = '0.55rem 0.6rem';
          div.style.color = '#9ca3af';
          div.textContent = 'No AI DJ spins found for this applicant.';
          box.appendChild(div);
          return;
        }

        list.slice().reverse().forEach(spin => {
          const row = document.createElement('div');
          row.className = 'row';

          const main = document.createElement('div');
          main.className = 'row-main';

          const title = document.createElement('div');
          title.className = 'row-title';
          title.textContent = spin.title || 'Untitled';

          const sub = document.createElement('div');
          sub.className = 'row-sub';
          sub.textContent = 'Final weight: ' + (spin.finalWeight || 1) + ' ‚Ä¢ ' + (spin.kind || '');

          const meta = document.createElement('div');
          meta.className = 'row-meta';
          meta.textContent = formatTime(spin.playedAt || spin.timestamp);

          main.appendChild(title);
          main.appendChild(sub);
          main.appendChild(meta);

          const right = document.createElement('div');
          right.className = 'row-right';
          if (Array.isArray(spin.boostTags) && spin.boostTags.length) {
            spin.boostTags.forEach(tagName => {
              const tag = document.createElement('span');
              tag.className = 'tag sponsor';
              tag.textContent = tagName.toUpperCase();
              right.appendChild(tag);
            });
          }

          row.appendChild(main);
          row.appendChild(right);
          box.appendChild(row);
        });
      }

      function runLookup() {
        const input = document.getElementById('inputIdentifier');
        const identifier = input ? input.value : '';
        if (!identifier) {
          alert('Type email or creator name first.');
          return;
        }

        const uploads = safeParse(KEY_UPLOADS, []);
        const mixOrders = safeParse(KEY_MIX, []);
        const socialCampaigns = safeParse(KEY_SOCIAL, []);
        const tagsMap = safeParse(KEY_LABEL_TAGS, {});
        const history = safeParse(KEY_HISTORY, []);
        const contractLatest = safeParse(KEY_CONTRACT, null);

        const matchedUploads = findUploads(identifier, uploads);
        const matchedMix = findMixtapes(identifier, mixOrders);
        const matchedSocial = findSocial(identifier, socialCampaigns);

        let displayName = identifier;
        if (matchedUploads.length) displayName = chooseBestName(matchedUploads[0]) || displayName;
        else if (matchedMix.length) displayName = chooseBestName(matchedMix[0]) || displayName;
        else if (matchedSocial.length) displayName = chooseBestName(matchedSocial[0]) || displayName;

        const primaryEntry = matchedUploads[0] || matchedMix[0] || matchedSocial[0] || null;
        const role = detectRole(matchedMix[0], matchedSocial[0], matchedUploads[0]);

        const spins = findSpins(displayName, history);
        const tagSummary = summarizeTags(matchedSocial, tagsMap);
        const contractText = summarizeContract(contractLatest, identifier);

        renderHeader(displayName, role);
        renderStats(matchedUploads, matchedMix, matchedSocial, spins, tagSummary, contractText);
        renderUploads(matchedUploads);
        renderMix(matchedMix);
        renderSocial(matchedSocial, tagsMap);
        renderSpins(spins);
      }

      function initApplicantStatement() {
        const btn = document.getElementById('btnLookup');
        if (btn) {
          btn.addEventListener('click', runLookup);
        }
        const input = document.getElementById('inputIdentifier');
        if (input) {
          input.addEventListener('keypress', function(e){
            if (e.key === 'Enter') {
              e.preventDefault();
              runLookup();
            }
          });
        }
      }

      window.addEventListener('DOMContentLoaded', initApplicantStatement);
    })();
  </script>
</body>
</html>
