<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TKFM Admin ‚Äî Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body{background:#000;color:#fff;font-family:Arial,sans-serif;padding:24px;max-width:1000px;margin:0 auto}
    .card{background:#111;border:1px solid #222;border-radius:12px;padding:16px;margin:14px 0}
    input,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #333;background:#0b0b0b;color:#fff}
    textarea{min-height:260px;resize:vertical}
    button{padding:10px 12px;border-radius:10px;border:1px solid #333;background:#1b1b1b;color:#fff;cursor:pointer}
    button:hover{border-color:#555}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .muted{color:#aaa}
    .ok{color:#7CFFB2}
    .danger{color:#FF7C7C}
  </style>
</head>
<body>

  <h1>Create Blog Post</h1>
  <p class="muted">Admin-only. Uses locked Netlify functions + Supabase service role.</p>

  <div class="card">
    <div class="row">
      <div>
        <label>Title</label>
        <input id="title" placeholder="Blog title..." />
      </div>
      <div>
        <label>Slug (optional, a-z 0-9 -)</label>
        <input id="slug" placeholder="my-blog-post" />
      </div>
    </div>

    <div style="margin-top:10px">
      <label>Excerpt (optional)</label>
      <input id="excerpt" placeholder="Short summary..." />
    </div>

    <div style="margin-top:10px">
      <label>Body</label>
      <textarea id="body" placeholder="Write the post..."></textarea>
    </div>

    <div class="toolbar" style="margin-top:10px">
      <label class="muted"><input id="published" type="checkbox" /> Publish now</label>
      <button id="btnPublish">Save</button>
      <span id="msg" class="muted"></span>
    </div>
  </div>

  <script>
    const API = '/.netlify/functions'
    const TOKEN_KEY = 'tkfm_admin_token'

    async function fetchJSON(url, opts = {}) {
      const res = await fetch(url, opts)
      const text = await res.text()
      let json = null
      try { json = text ? JSON.parse(text) : null } catch {}
      return { ok: res.ok, status: res.status, j



























<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TKFM Admin ‚Äî Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body{background:#000;color:#fff;font-family:Arial,sans-serif;padding:24px;max-width:1100px;margin:0 auto}
    .card{background:#111;border:1px solid #222;border-radius:12px;padding:16px;margin:14px 0}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    input,textarea,select{width:100%;padding:10px;border-radius:10px;border:1px solid #333;background:#0b0b0b;color:#fff}
    textarea{min-height:240px;resize:vertical}
    button{padding:10px 12px;border-radius:10px;border:1px solid #333;background:#1b1b1b;color:#fff;cursor:pointer}
    button:hover{border-color:#555}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .muted{color:#aaa}
    .badge{display:inline-block;padding:4px 10px;border:1px solid #333;border-radius:999px;font-size:12px}
    .ok{color:#7CFFB2}
    .warn{color:#FFD37C}
    .danger{color:#FF7C7C}
    article{padding:14px;border-radius:12px;border:1px solid #222;background:#0d0d0d;margin:10px 0}
    article h3{margin:0 0 6px}
    .meta{font-size:12px;color:#9aa}
  </style>
</head>
<body>
  <h1>üìù Blog Manager</h1>
  <p class="muted">Admin-only. Requires tkfm_admin_token.</p>

  <section class="card">
    <h2>Create / Edit</h2>

    <div class="toolbar">
      <span class="muted">Editing ID:</span>
      <span id="editId" class="badge">new</span>
      <button id="btnNew">New</button>
      <span id="msg" class="muted"></span>
    </div>

    <div class="row" style="margin-top:10px">
      <div>
        <label>Title</label>
        <input id="title" placeholder="Blog title..." />
      </div>
      <div>
        <label>Slug (a-z 0-9 -)</label>
        <input id="slug" placeholder="my-blog-post" />
      </div>
    </div>

    <div class="row" style="margin-top:10px">
      <div>
        <label>Excerpt</label>
        <input id="excerpt" placeholder="Short summary..." />
      </div>
      <div>
        <label>Cover URL</label>
        <input id="cover_url" placeholder="https://..." />
      </div>
    </div>

    <div style="margin-top:10px">
      <label>Body</label>
      <textarea id="body" placeholder="Write the post..."></textarea>
    </div>

    <div class="toolbar" style="margin-top:10px">
      <label class="muted"><input id="published" type="checkbox" /> Published</label>
      <button id="btnSave">Save</button>
      <button id="btnDelete" class="danger">Delete</button>
    </div>
  </section>

  <section class="card">
    <h2>List / Search</h2>

    <div class="row">
      <div>
        <label>Search</label>
        <input id="q" placeholder="Search title/body/author/slug..." />
      </div>
      <div>
        <label>Status</label>
        <select id="status">
          <option value="all">All</option>
          <option value="published">Published</option>
          <option value="draft">Draft</option>
        </select>
      </div>
    </div>

    <div class="toolbar" style="margin-top:10px">
      <button id="btnSearch">Search</button>
      <button id="btnRefresh">Refresh</button>
      <span class="muted">Count:</span>
      <span id="count" class="badge">0</span>
    </div>

    <div id="list"></div>
  </section>

  <script type="module" src="/admin/blog.js"></script>
</body>
</html>

